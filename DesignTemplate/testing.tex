% !TEX root = DesignDocument.tex


\chapter{System  and Unit Testing}

This section describes the approach taken with regard to testing for the DanceSoft project. 

\section{Overview}
The general testing for this iteration of the DanceSoft was done through manual user and developer testing of the GUI and making sure that the correct values ended up in the database in the way the team was expecting. The team also checked removal to make sure that they were being processed correctly. Other GUI functionality was also tested such as buttons and overall usability of functions.

Success for this testing procedure is measured by correct interactions with the database and user. An example of a successful test would be a user adds a teacher, the system checks the required fields and outputs an error dialog if not filled out. Once the form is filled out the teacher information is correctly placed in the Teacher table and an account is made within the Account table.

Failure is similarly defined for this project, if a function misplaces or incorrectly places data in the database or if the query fails and breaks search, then it is defined as a failure. Other instances of failure are defined for the individual functions.

\section{Dependencies}
There are several dependencies for the testing of the DanceSoft system. The following is a general overview of the dependencies found by the team:

\begin{itemize}
\item Team Inexperience - The team lack mass testing experience due to the fact that neither team member has had any industrial experience before this project.
\item Difficulty of Unit Testing - Owing to the project being mostly GUI and Database the team had issues with developing unit test for the project. So for many reasons the project was manually tested for both GUI and database
\item Team Testing Effectiveness - Since the testing was manually conducted the thoroughness of testing was completely determined by the team members efficiency. This caused issues within the team and the testing since some team member were less effective at times.  
\end{itemize} 


\section{Test Setup and Execution}
The DanceSoft project has all of it functions tied to various GUI elements such as buttons, spinboxes, and line edits. As such the teams testing approach was to test the functions and database connections. Most pages followed this general testing structure:

\begin{itemize}
\item Test error notifications - such as not filling out required form fields
\item Button allocation - can the user only click a button or element within the page when allowed.
\item Correct Data Appearance - Does the functions that receive data receive the correct values from the database
\item Correct Data Submission - Does data creation or updates get processed within the database and placed in the correct tables
\item Correct Database Handling - Are the updates place in the correct places and are they complete
\end{itemize}


\section{System Testing}

Login page:\\

Log in testing case structure:
\begin{itemize}
\item test invalid user name
\item test invalid password
\item test correct log in 
\item test log in button directing to landing selection page
\item test cancel button exiting software
\item test permission system - once at landing selection is someone with the correct permissions locked out of admin landing
\item test navigation - do the buttons to the admin and teacher landing pages work navigate correctly
\end{itemize}

Landing Selection:\\

\begin{itemize}
\item Tested to confirm that the admin button goes to the admin landing page
\item Tested to confirm that the teacher button goes to the teacher landing page
\end{itemize}

Admin Landing:\\

The admin landing page is composed of entirely buttons that go to the function windows tied to the button. Therefore the admin landing testing is covered in system integration testing and testing other function since the buttons needed to work to test the functions.

Teacher Landing:\\

As with the admin landing page the testing for this page is retroactively covered by navigating to other pages through the GUI, the system integration testing and the demos.

Add Information Forms:\\

There are several forms that add information to the system these include add teacher, add student, and add class the testing structure follows:

\begin{itemize}
\item Test that each button connected to a form displays correctly and opens the correct form
\item Test the line edits ability to accept input
\item Test the spin boxes
\item Test the date edits
\item Test Combo boxes
\item Test the submit button triggering the require field dialog if not filled out correctly
\item Test the submission of new data entry to the database when the submit button is clicked
\end{itemize}

The teacher and student forms error check the name, phone numbers which must be formatted as a ten digit number, and address. The address in placed in the data base in caps to prevent the duplication of addresses within the database. As a class is generated the class id is set to the next in the database.

The student forms include a guardian option where the user is able to select a guardian from a combo box or add a new one to the system. Test were run to make sure that when add new was selected a guardian dialog will pop up and the user can enter a new guardian which is then added to the combo box.

The class form similar to the student page includes a location combo box that when add new is selected brings up a line edit dialog where the user can enter a new location. Specific special form test where:

\begin{itemize}
\item Student Form: Test add new guardian and add secondary pulling up forms
\item Student Form: Test the adding of guardian name to combo box
\item Student Form: Test Updates
\item Class Form: Test the adding of a location to the combo box and location retrieval from the database
\end{itemize}

Search Pages:\\
There are several search pages in the system these including class search, student search and teacher search
The general testing format for the search pages follow:

\begin{itemize}
\item Do the windows connect to the right button
\item Test that the search window has correct starting data
\item Test that the user can type a name into the search bar and find the correct values when the submit button is clicked
\item Test the search again with the exact box checked to confirm that only what is typed is found
\item After a search test the refresh button to confirm that it bring back the full list of values
\item Test that the advance search dialog comes up when the advanced button is clicked
\item Test the various fields in the advanced search for success
\item Test that the search window allows for selection of values in the search window
\item Test that details button pops up with an error dialog if the user has not selected a value
\item Test that when the details button is clicked a dialog containing the selected values information
\item Test updating information for value following the update forms testing
\end{itemize}

Show Admin List:\\
The admin list is a fairly simple widget the user clicks a button and a list window pops up with a search and list of system admin. The following test were conducted:

\begin{itemize}
\item Test that button on the Admin Landing page opens correct window.
\item Test that every system admin is displayed in the list (using test data)
\item Test that search function correctly refines the list of names based on if the name contains the typed string
\end{itemize}

Update Teacher Information:\\
The update teacher information form is very similar to the add a teacher form and therefore when through the same test, does the error checking work, does the submit button update the teacher in the database correctly. However there are a few test cases for update that do not apply to "new teacher." The new test cases are:

\begin{itemize}
\item Does the select teacher combo box populate with the teacher names correctly
\item Test if the teacher select button correctly populate the form with the correct teachers data
\item Once the data change has been submitted does it register correctly within the database
\end{itemize}

Enter Teacher Hours:\\
The enter teacher hours page is supposed to allow the user to see the hours logged by a selected teacher and change them if need be. The following test cases were used to test this function:

\begin{itemize}
\item Test that the landing button bring up the correct window
\item Test that the teacher list contain the full list of teachers before searching
\item Test the search function refining the list of teachers correctly.
\item Test that the course hours are correctly calculated
\item Test the pay rate combo box selection
\item Test changing the hours of pay rates and confirm that gross wage is being recalculated correctly
\end{itemize} 

Assign Teacher to Class:\\
This page should allow the user to select the class and assign teachers to the class. The following test were used to test this function:

\begin{itemize}
\item Test the landing page button directs to the right page
\item Test that the class and teacher list generate correctly
\item Test that when a class is selected that the teacher list only generates the available teachers 
\item Test assign to a not assigned class
\item Test assign to a class that is already assigned to a teacher (pops up a dialog asking the user)
\item Check the database for changes and submissions 
\end{itemize}

Teaching History:\\
Teaching history should allow the user the ability to select a teacher and view a simple text list of past classes taught. The following are generic test to confirm page function:

\begin{itemize}
\item Test that landing page button opens correct window
\item Confirm that teacher list is being retrieved from the database correctly
\item Confirm that search refines the teacher list correctly based on the string typed and teacher names
\item Test class history button and display of past classes
\end{itemize}

Set Semester:\\
Set semester should allow the user to set the current semester in the system and add new ones to the system. The general test follow:

\begin{itemize}
\item Test that the landing page button goes to the correct window
\item Test that the combo box contains the list of semesters
\item Test adding a new semester
\end{itemize}

Currently there exist no way of removing semester from the system within the GUI.

Student Credits:\\
Student Credits is a stand alone function that allows the user to look for a student and see if any credits have been logged and add to or subtract credit as needed. The function is only meant to store a value. The test follow:

\begin{itemize}
\item Test landing button opening the correct window
\item Test student selection - does the credit amount for that student show up in the spin box
\item Test changing and updating the values by clicking the update button swiching students and reselecting the student.
\item Test that the cancel button closes the window

Due to the Academy's no refund policy the credits are not apllied to anything and therefore any sort of calculation test are not required.
\end{itemize}

Add/Remove Student:\\
This page is supposed to add and remove students from classes the function is not currently in use in the project but is left in at the request of the client. The following test were conducted before the functionality was abandoned:

\begin{itemize}
\item Test that window displays on button press
\item Test that correct class list displays
\item Confirm that student status window displays correctly
\item Test add functionality on both pending and rejected students
\item Test remove functionality on both pending and approved students
\end{itemize}

Registration:\\
Test cases for student registration page follow:

\begin{itemize}
\item Test the entering new student
\item Test error checking for the fields
\item Test add guardian and and secondary guardian
\item Confirm that added guardians are inserted into the combo box
\item Confirm that new student is added to the database
\item Test that update function brings up selected students data
\item Test that updates are correctly processed
\item Test that classes can be added and dropped from the selected students schedule
\item Confirm database data is correct 
\end{itemize}

Removal Functions:\\
The removal functions follow this general testing framework:

\begin{itemize}
\item Test that windows pop up when buttons are pressed on the admin landing page
\item Test that the selection drop down fully populates with the data from the tables
\item Test removal and that data is fully removed from the database
\end{itemize}

The teacher removal removes from the Teacher table, the Teacher Class, Address, Teacher Payrate, Account, and the admin table if needed. The class removal removes from the Class, Student\_Class, and the Teacher\_Class. The student removal removes from the Student, Student\_Class, Address, Guardian, and billing tables. Lastly the admin removal removes either admin permissions or admin from the system.
  
Enter Partial Payment:\\
This page should be able to log student payments. The test to confirm functionality follow:

\begin{itemize}
\item Test that that landing page button correctly links to the payment page
\item Test that the window displays all students in the system
\item Once a student is selected test the selection button which brings up the payment window
\item Test the ability to enter and submit a payment to the database.
\item Test that submitted payment is displayed in billing history
\end{itemize}

Enter Full Payment:\\
Like the partial payment page the full payment page clears the selected student debt.

\begin{itemize}
\item Test that that landing page button correctly links to the payment page
\item Test that the window displays all students in the system
\item Once a student is selected test the clear button, which should clear the students billing
\end{itemize}


Enter Teacher Pay Rate:\\

\begin{itemize}
\item Test that the landing button bring up the correct window
\item Test that the teacher list contain the full list of teachers before searching
\item Test the search function refining the list of teachers correctly.
\item Test that the course hours are correctly calculated
\item Test the pay rate combo box selection
\item Test changing the hours of pay rates and confirm that gross wage is being recalculated correctly
\end{itemize} 


Student Balance:\\
Student Balance displays an invoice for the selected student

\begin{itemize}
\item Test that the landing button bring up the correct window
\item Test that the student list contain the full list of students before searching
\item Test the search function refining the list of students correctly.
\item Test that the invoice appears correctly and check within database that the numbers are correct
\item Test the print button functionality
\item Test the close button returning to the landing page
\end{itemize} 

Billing History:\\
The testing for billing history is very similar to the testing for most of the payroll functions:

\begin{itemize}
\item Test that the landing button bring up the correct window
\item Test that the student list contain the full list of students before searching
\item Test the search function refining the list of students correctly.
\item Test that the invoice appears correctly
\item Test the print button functionality
\item Test the close button returning to the landing page
\end{itemize}


Student Schedule:\\

\begin{itemize}
\item Test that window appears correctly
\item Test that student list is generated correctly
\item Test that the class schedule display button correctly pulls up the student schedule
\item Test that the dynamic schedules are generated in the right way for the classes the student is in
\item Test the print button and the close button
\end{itemize}

Teacher Class Schedule:\\

\begin{itemize}
\item Test that window appears correctly
\item Test that teacher list is generated correctly
\item Test that the class schedule display button correctly pulls up the schedules 
\item Test that the dynamic schedules are generated in the right way for the classes the teacher is teaching
\item Test the print button and the close button
\end{itemize}

Class Role Sheet:\\

\begin{itemize}
\item Test that window appears correctly
\item Test that teacher's class list is generated correctly
\item Test that the student list is generated correctly for the selected class
\item Test the role sheet display button correctly pulls up the role sheet
\item Test the role sheet print button and close button
\end{itemize}

Change Password:\\
The change password function has the following test cases:

\begin{itemize}
\item does the window show correctly when the button on the landing page was pressed
\item Test that the error checking occurs for incorrectly entered user name and password 
\end{itemize}

Change Username:\\
The change user name function has the following test cases:

\begin{itemize}
\item does the window show correctly when the button was pressed
\item Test that the error checking occurs for incorrectly entered user name and password 
\end{itemize}

Modify Personal Information:\\

The update my teacher information form is very similar to the add a teacher form and therefore when through the same test, does the error checking work, does the submit button update the teacher in the database correctly. However there are a few test cases for update that do not apply to "new teacher."

\begin{itemize}
\item Test if the system correctly populates the form with the correct teachers data
\item Once the data change has been submitted does it register correctly within the database
\end{itemize}

Enter Hours:\\

\begin{itemize}
\item Test that the landing button bring up the correct window
\item Test that the course hours are correctly calculated
\item Test the ability for the teacher to log hours and dynamically see hours
\end{itemize} 





\section{System Integration Analysis}
System integration testing occurred at several points during development with the goal of making sure that the separate functions of the user interface tied together and worked correctly.

At the start of sprint 2 the admin and teacher main pages where tied into the "login" page, through several log ins the team was able to confirm that the navigation works as intended.

The major system integration test occurred during sprint 3.5. During this time the majority of the functions were tied to the main pages. These pages include the searches, assign teacher, and many others completed before this point. Once the pages where connected the system was ran several times to confirm that the navigation connected to the correct pages and the functions ran. This phase created the projects first connected prototype, which culminated in a first semester prototype demo for the client after returning from sprint 3.5.

After the first connected prototype was created the team tied the functions in as they were finished and through testing the functions also tested system integration since the team would need to log in and navigate to the various pages within the system. 

Once development of the project was frozen by the client the team conducted a last round of system integration testing was conducted across all functions to confirm that the system would correctly flow for the South Dakota School of Mines Design Fair. After the design fair the team has conducted no further test due to the development freeze on the project.


\section{Risk Analysis}
During development of the DanceSoft project the project encountered a few possible risk that could effect the system. The team has found the following main risk within the system.

\begin{enumerate}
\item Interface Usability
\item Database Connectivity
\item Data Security
\item Data Backup
\end{enumerate}

The first of the main risk is the PyQt interface usability. The system must maintain a simple and easy to use interface. This way the users can efficient and effectively access the system while maintaining the functionality at the systems core. The team must always keep this fact in mind when developing any of the systems pages and structures, as the users at the Academy are not assumed to have a technical background.

The second risk is the database connectivity. If the database can not be reached the project is incapable of accomplishing its functions. The system at its core is a database manipulation software, without the ability to connect to the database the project can not function. The system must therefore assure connection before allowing the users to continue.

The third set of risk with the DanceSoft system is database backups and data security. Database backups can be achieved by using functions within the MySQL database software. These backups can then be stored on a local system or wherever the client chooses to store the data. Database security can be achieved using prepared statements and queries, and other techniques of encryption and protection.  


\subsection{Risk Mitigation}
The following section is the teams approaches, goals, and ideas to mitigate the various risk with the the DanceSoft project.

The teams has been developing each interface with the idea of usability in mind during the entire process. One of the testing approaches that the team used was user testing. This method meant sitting down and acting like a user of the system and not a developer or technical user. If during this process something did not make sense or execution did not work in the expected way, the interface or function was reworked. Another part of this approach involved having people do sudo-beta test by sitting and attempting navigation of the system. If any questions or concerns came up from the user they were analyzed and addressed if necessary by the team. By keeping the interface simple and asking for feedback the team hopes to mitigate usability issues as much as possible.

The database risks are only partially dealt with in the current project. The database connection issues are handled through a few error checks in the connection. Also since the database will be contained in the local machine provided by the client the database can be connected to directly. This connection issue will increase once a student web interface is added to system, or if the client moves the database the connection will become reliance on the communication between either the two systems or the network connectivity at the Academy. Some of these future student interface issues were discussed before the student portal was dropped from the project. The rink could possibly be handled by storing the information the students are sending through a socket and storing it until the database is booted at the Academy. At which point the updates would be submitted.
Another database risk is the security of the data stored within. The backup issue can be solved through writing the contents to a file which can be stored on either the local machine, or another machine as to protect the data should something happen to the computer in which the database is stored. Many MySQL management software also have ways of exporting the statements needed to create the database which the client can use to manage backups and create text file backups. The actually security of the data will not be completed in this iteration of the software. However the team has a few ideas for data security. Firstly since only the local system exist at this time, data should not be passed over a network. The SQL queries can be placed into prepared statement to aid in their security. Its is highly advised by the development team that security solutions be explored by future developers as the current team lacks the experience and expertise to truly ensure the security of the data contain within the system.

\section{Successes, Issues and Problems}
The following is an overview of the testing successes, issues and problems.

The team testing approach was mostly successful for this project, bugged where found and handled by the team as the they came up. The overall functionality of several pages was tested when working with other functions creating secondary test.

Some issues and problems that came up for the team where:

\begin{itemize}
\item Different levels of testing thoroughness by the team members
\item Team had to watch when making changing the database since it could change unwanted values
\item By doing manual testing the testing was not done automatically like with unit test. In the next iteration it is highly recommend that the new team finds a unit testing framework to reduce overall work load.
\item Due to this project being the first iteration of the system and the team was on the senior design deadline some functions did not reach the full completion state so the team was unable to test incomplete or left out functions.
\item Due to the overall problems with the project it is possible the team may have missed possible edge cases. 
\end{itemize}


\subsection{Changes to the Backlog}
Overall the project's base remained unchanged from the the beginning requirements. However as the project was being built the backlog and project encountered a few changes and iterations. These changes and modification are briefly explained in this section. 

During the project the backlog was changed multiple times. The first of these redesigns occurred after sprint 2. The team and the client elaborated on some of the user stories to give the team an increased amount of focus for the various functions. This allowed the team to better develop the core system functionality required by the project.

However the first major change to the project's backlog occurred after sprint 3.5. It became clear to the team that the student web portal would not be completed by the end of the senior design project period. After discussions with the client in order to make the local desktop GUI as complete as possible the student interface was dropped from the project requirements. Users stories for this aspect of the project included: student registration, view tuition, and student schedules. In response to these changes the team ported the functions into the local desktop interface to create the student registration, billing, schedule, and other interfaces.

The last changes to the backlog occurred in the last sprint of the project. The project had been refined at this point as a first iteration of the DanceSoft project. This change became necessary as issues arose within the team that prevented the team from reaching full project completion. As a consequence of this the project became a proof of concept or minimum viable product for the client. The team demoed the existing software for the client, at this meeting the client and the team discussed the requirements again and reevaluated the project requirements for completion, and the senior design fair presentation. 

